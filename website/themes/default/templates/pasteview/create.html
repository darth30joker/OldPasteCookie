{% extends theme('default/base.html') %}
{% block title %}粘贴新代码{% endblock %}
{% block content %}
<script type="text/javascript">
$(document).ready(function() {
	$('#show-desc-link').toggle(function() {
		$('#show-desc-box').fadeIn('fast');
		location.href = '#show-desc-box';
		$(this).html('隐藏描述');
	}, function() {
		$('#show-desc-box').fadeOut('fast');
		$(this).html('添加描述');
	});
	$('#show-code-link').toggle(function() {
		$('#show-code-box').fadeOut('fast');
		$(this).html('添加代码');
	}, function() {
		$('#show-code-box').fadeIn('fast');
		location.href = '#show-code-box';
		$(this).html('隐藏代码');
	});
	$('#show-file-link').toggle(function() {
		$('#show-file-box').fadeIn('fast');
		location.href = '#show-file-box';
		$(this).html('隐藏文件');
	}, function() {
		$('#show-file-box').fadeOut('fast');
		$(this).html('上传文件');
	});
})
</script>
<div id="paste_new">
	<h2 class="new-paste-title pl10">
		<span></span>
		粘贴新代码
	</h2>
	{% if g.form.code_file.errors %}
		<ul>
			{% for error in g.form.code_file.errors %}
			<li class="alert alert-error">
				<button class="close" data-dismiss="alert">×</button>
				{{ error }}
			</li>
			{% endfor %}
		</ul>
	{% endif %}
	<form class="form pt15" action="{{ url_for('pasteview.create') }}" method="POST" enctype="multipart/form-data">
		<p class="clearfix">{{ g.form.title.label(class="span1 lh30 mr10") }}{{ g.form.title(class="span7") }}</p>
		<p class="clearfix"><label class="span1 lh30 mr10"></label><span class="help-block">可以不填</span></p>
		<p class="clearfix">{{ g.form.syntax.label(class="span1 lh30 mr10") }}{{ g.form.syntax(class="span7 lf") }}</p>
		<p class="clearfix">{{ g.form.tag.label(class="span1 lh30 mr10") }}{{ g.form.tag(class="span7 lf") }}</p>
		<p class="clearfix"><label class="span1 lh30 mr10"></label><span class="help-block">多个标签用空格区分, 最多可以写3个</span></p>
		<p class="clearfix">
			<label class="span1 lh30 mr10"></label>
			<a href="javascript: void(0);" id="show-desc-link" class="mr10">添加描述</a>	
			<a href="javascript: void(0);" id="show-code-link" class="mr10">隐藏代码</a>	
			<a href="javascript: void(0);" id="show-file-link" class="mr10">上传文件</a>	
		</p>
		<p class="clearfix"><label class="span1 mr10">是否私有</label>{{ g.form.is_private(class="pt5 lf") }}</p>
		<p id="show-desc-box" style="display: none">
			<label class="span1 lh30 mr10">描述</label>
			{{ g.form.description(class="span7 lf") }}
		</p>
		<p id="show-code-box" class="clearfix">
			<label class="span1 lh30 mr10">代码</label>
			{{ g.form.content(class="lf") }}
		</p>
		<p id="show-file-box" class="clearfix" style="display: none">
			<label class="span1 lh30 mr10">上传文件</label>
			{{ g.form.code_file(class="input-file") }}
		</p>
		<p class="clearfix"><label class="span1 lh30 mr10"></label><input type="submit" class="btn btn-primary" value="发表" /></p>
	</form>
	<br />
</div>
{% endblock %}
{% block sidebar %}
<h2 class="new-paste-title">
	<span></span>
	站点介绍
</h2>
<p class="lh24 pt15">
	代码段(以前的大卫粘贴)是一个什么样的网站呢?
	我很难用一句话来形容. 你可以用它来贴代码, 你也可以用它来展示代码,
	你也可以用它来收藏代码, 你也可以用它来观察别人都在写什么代码.
</p>
{% endblock %}
